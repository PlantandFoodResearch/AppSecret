<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Application Secrets — AppSecret-package • AppSecret</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Application Secrets — AppSecret-package" />
<meta property="og:description" content="A simple way to symmetrically encrypt information and store
on disk." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AppSecret</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/appsecret.html">Application Secrets with AppSecret</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/PlantandFoodResearch/AppSecret/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Application Secrets</h1>
    <small class="dont-index">Source: <a href='https://github.com/PlantandFoodResearch/AppSecret/blob/master/R/AppSecret-package.R'><code>R/AppSecret-package.R</code></a></small>
    <div class="hidden name"><code>AppSecret-package.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A simple way to symmetrically encrypt information and store
on disk.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The goal of AppSecret is to manage application secrets for users,
be they developers or test/production service users.</p>
<p>A PEM format public/private key pair is used to encrpyt a cryptographically
random 32 bytes which is used as a 256bit key to encrypt any number of
files, streams or data. The 256bit key and the encrpyted files may be stored
with the application, either in the repository or on disk so long as the
private key is kept secret. By default this is a user's home directory as
defined by <code><a href='https://rdrr.io/r/base/normalizePath.html'>normalizePath("~")</a></code>.</p>
    <h2 class="hasAnchor" id="usage"><a class="anchor" href="#usage"></a>Usage</h2>

    

<pre><span class='va'>paths</span> <span class='op'>&lt;-</span> <span class='fu'><a href='app_secret_paths.html'>app_secret_paths</a></span><span class='op'>(</span>appname <span class='op'>=</span> <span class='st'>"client-app"</span><span class='op'>)</span>

<span class='va'>asm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='app_secret_manager.html'>app_secret_manager</a></span><span class='op'>(</span>symmetric_file <span class='op'>=</span> <span class='va'>paths</span><span class='op'>$</span><span class='va'>symmetric_file</span>,
                          key_file       <span class='op'>=</span> <span class='va'>paths</span><span class='op'>$</span><span class='va'>key_file</span><span class='op'>)</span>
<span class='co'>## or</span>
<span class='va'>asm</span> <span class='op'>&lt;-</span> <span class='va'>app_secret</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>symmetric_file <span class='op'>=</span> <span class='va'>paths</span><span class='op'>$</span><span class='va'>symmetric_file</span>,
                      key_file       <span class='op'>=</span> <span class='va'>paths</span><span class='op'>$</span><span class='va'>key_file</span><span class='op'>)</span>

<span class='va'>password_file</span> <span class='op'>&lt;-</span> <span class='va'>asm</span><span class='op'>$</span><span class='fu'>path_in_vault</span><span class='op'>(</span>filename <span class='op'>=</span> <span class='st'>"client-password.enc"</span><span class='op'>)</span>

<span class='va'>decrypted_password</span> <span class='op'>&lt;-</span> <span class='va'>asm</span><span class='op'>$</span><span class='fu'>decrypt_file</span><span class='op'>(</span>file <span class='op'>=</span> <span class='va'>password_file</span><span class='op'>)</span>
</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>

    

<p><code>appname</code> A name for the manager to use in directory names</p>
<p><code>symmetric_file</code> The path to the file that contains the symmetric
256bit key</p>
<p><code>key_file</code> The path to the private key file in PEM format</p>
<p><code>filename</code> The name of a file to store/access in the vault</p>
<p><code>file</code> The absolute path to a file containing encrypted data</p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    

<p><code>$new(symmetric_file, key_file)</code> Initialise an instance of the app
secrets manager with paths for the symmetric encryption password and
private key file.</p>
<p><code>$create_keys(key_file)</code> Create a public/private key pair in PEM format
for later use. The key is immediately available for use by the manager.</p>
<p><code>decrypt_data(data)</code> Decrypt <code>data</code>, which must be <code>raw</code>. The
decrypted data will also be <code>raw</code>.</p>
<p><code>decrypt_file(file)</code> Decrypt the contents of <code>file</code> returning a
<code>character</code> vector.</p>
<p><code>encrypt_data(data)</code> Encrypt <code>data</code>, which may be either of
<code>class</code> <code>character</code> or <code>raw</code>. <code>raw</code> will be returned.</p>
<p><code>encrypt_file(file)</code> Encrypt the contents of <code>file</code>.</p>
<p><code>path_in_vault(filename)</code> Return an absolute path to a file with
<code>filename</code> in the vault.</p>
<p><code>read_encrypted(file)</code> Use <code><a href='https://rdrr.io/r/base/readBin.html'>readBin</a></code> to slurp the contents
of <code>file</code>.</p>
<p><code>set_debug(debug)</code> Set the debug flag to the value of <code>debug</code>.
Only useful for obtaining more information from errors at the current time.</p>
<p><code>tap(func)</code> kestrel for injecting non-chaining methods <code>func</code> in a
chain.</p>
<p><code>write_encrypted(data, file)</code> Use <code><a href='https://rdrr.io/r/base/readBin.html'>writeBin</a></code> to spurt
<code>data</code> into <code>file</code>.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Roy Storey <a href='mailto:roy.storey@plantandfood.co.nz'>roy.storey@plantandfood.co.nz</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>paths</span> <span class='op'>&lt;-</span> <span class='fu'><a href='app_secret_paths.html'>app_secret_paths</a></span><span class='op'>(</span>appname <span class='op'>=</span> <span class='st'>"client-app"</span><span class='op'>)</span>

<span class='va'>asm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='app_secret_manager.html'>app_secret_manager</a></span><span class='op'>(</span>symmetric_file <span class='op'>=</span> <span class='va'>paths</span><span class='op'>$</span><span class='va'>symmetric_file</span>,
                          key_file       <span class='op'>=</span> <span class='va'>paths</span><span class='op'>$</span><span class='va'>key_file</span><span class='op'>)</span>

<span class='va'>asm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span><span class='op'>(</span><span class='va'>app_secret_manager</span>, <span class='va'>paths</span><span class='op'>)</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.exists</a></span><span class='op'>(</span><span class='va'>asm</span><span class='op'>$</span><span class='fu'>path_in_vault</span><span class='op'>(</span><span class='st'>"password.enc"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>password</span> <span class='op'>&lt;-</span> <span class='st'>"your password"</span> <span class='co'>## or use getPass::getPass() /</span>
                              <span class='co'>## rstudioapi::askForPassword()</span>
  <span class='va'>encrypted</span> <span class='op'>&lt;-</span> <span class='va'>asm</span><span class='op'>$</span><span class='fu'>encrypt_data</span><span class='op'>(</span><span class='va'>password</span><span class='op'>)</span>
  <span class='va'>asm</span><span class='op'>$</span><span class='fu'>write_encrypted</span><span class='op'>(</span><span class='va'>encrypted</span>, <span class='va'>asm</span><span class='op'>$</span><span class='fu'>path_in_vault</span><span class='op'>(</span><span class='st'>"password.enc"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>password</span> <span class='op'>&lt;-</span> <span class='va'>asm</span><span class='op'>$</span><span class='fu'>decrypt_file</span><span class='op'>(</span><span class='va'>asm</span><span class='op'>$</span><span class='fu'>path_in_vault</span><span class='op'>(</span><span class='st'>"password.enc"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>decrypting symmetric file success</span></div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Roy Storey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


